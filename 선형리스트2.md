### ğŸ“š Array Deque
>ğŸ’¡**Array Dequeì´ë€?** 
>
ë°°ì—´(a) ê¸°ë°˜ìœ¼ë¡œ Listì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê²ƒ. 
Head, Tail ë‘˜ ì¤‘ ì–´ëŠê³³ì— ì›ì†Œë¥¼ ì¡°ì‘í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì¸ì§€ì— ë”°ë¼ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•¨.
> * Array Deque íŠ¹ì§•
	1. íš¨ìœ¨ì ì¸ **add, remove**ê°€ ê°€ëŠ¥.
	2. Array Queueì™€ ê°™ì€ **ìˆœí™˜ ë°°ì—´**(circular array)ê¸°ë²•ì„ ì‚¬ìš©.
![](https://velog.velcdn.com/images/codudals98/post/437733e0-3ce1-4d1a-a027-bea0c118f365/image.png)
####
```py
initialize()
a <- new_array(1) # ìƒˆë¡œìš´ ë°°ì—´ì„ ìƒì„±í•˜ì—¬ aë³€ìˆ˜ì— ì €ì¥
n <- 0 # ë…¼ë¦¬ì ì¸ ìˆœì„œì˜ ì²˜ìŒì„ ë‚˜íƒ€ë‚´ëŠ” ì¸ë±ìŠ¤(head)
n <- 0 # ì´ ì›ì†Œ 
-> [] # ë¹ˆ ë°°ì—´
```
```py
get(i)
#ì‹œê°„ë³µì¡ë„ O(1) 
# j(head)ë¡œ ë¶€í„° ië§Œí¼ ë–¨ì–´ì§„ ì›ì†Œë¥¼ ë¦¬í„´
	return a[(i + j) mod length(a)] 
```
```py
set(i,x)
#ì‹œê°„ë³µì¡ë„ O(1)
	y <- a[(i + j) mod length(a)]
# j(head)ë¡œ ë¶€í„° ië§Œí¼ ë–¨ì–´ì§„ ìë¦¬ì— x ì €ì¥
	a[(i + j) mod length(a)] <- x
	return y
```
```py
add(i,x)
# iì˜ ìœ„ì¹˜ì— ë”°ë¼ min{i, n-i} ë§Œí¼ì˜ ì›ì†Œ ì´ë™ì´ ì¼ì–´ë‚˜ë¯€ë¡œ ì‹œê°„ë³µì¡ë„ O(min{i, n-i})
if n = length(a) then resize() # ë°°ì—´aê°€ ê½‰ ì°¨ë©´ ë°°ì—´ì˜ í¬ê¸° ì¡°ì •
# iê°€ ì¤‘ì•™ë³´ë‹¤ ì™¼ìª½ì´ë©´ iì™¼ìª½ì˜ ì›ì†Œë“¤ì€ ì™¼ìª½ìœ¼ë¡œ í•œì¹¸ì”© ì´ë™í•  ê²ƒì´ë¯€ë¡œ jë¥¼ 1 ê°ì†Œ
	if i < n/2 then
		j <- (j - 1) mod length(a)
# ië³´ë‹¤ ì™¼ì¡±ì˜ ì›ì†Œë“¤ì„ í•œì¹¸ì‹ ì™¼ìª½ìœ¼ë¡œ ì´ë™
		for k in 0,1,2,... i - 1 do
        	a[(j + k) mod length(a)] <- a[(j + k + 1) mod length(a)]
    else
# iê°€ ì¤‘ì•™ë³´ë‹¤ ì˜¤ë¥¸ìª½ì´ë©´ iì˜¤ë¥¸ìª½ì˜ ì›ì†Œë“¤ì„ í•œì¹¸ì”© ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™
	    for k in n,n - 1, n - 2, ... ,i , i + 1 do
        a[(j + k) mod length(a)] <- a[(j + k - 1) mod length(a)]
# j(haed)ë¡œë¶€í„° ië§Œí¼ ë–¨ì–´ì§„ ìë¦¬ì— x ì €ì¥
	a[(j + i) mod length(a)] <- x 
	n <- n + 1
```
```py
remove(i)
# iì˜ ìœ„ì¹˜ì— ë”°ë¼ min{i, n-i} ë§Œí¼ì˜ ì›ì†Œ ì´ë™ì´ ì¼ì–´ë‚˜ë¯€ë¡œ ì‹œê°„ë³µì¡ë„ O(min{i, n-i})
x <- a[(j + i) mod length(a)]
# iê°€ ì¤‘ì•™ë³´ë‹¤ ì™¼ìª½ì´ë©´
if i < n/2 then
# ië³´ë‹¤ ì™¼ìª½ì˜ ì›ì†Œë“¤ì„ í•œì¹¸ì”© ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™
	for k in i,i - 1, i - 2, ..., 1 do
    	a[(j + k) mod length(a)] <- a[(j + k - 1) mod length(a)]
# ië³´ë‹¤ ì™¼ìª½ì˜ ì›ì†Œì´ í•œì¹¸ì”© ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í–ˆê¸° ë•Œë¬¸ì— j(head)ê°€ 1 ì¦ê°€
	j <- (j + 1) mod length(a)
else 
# iê°€ ì¤‘ì•™ë³´ë‹¤ ì˜¤ë¥¸ìª½ì´ë©´ ië³´ë‹¤ ì˜¤ë¥¸ìª½ì˜ ì›ì†Œë“¤ì„ í•œì¹¸ì”© ì™¼ìª½ìœ¼ë¡œ ì´ë™
	for k in i,i + 1, i + 2, ..., n - 2 do
    	a[(j + k) mod length(a)] <- a[(j + k + 1) mod length(a)]
n <- n - 1
if length(a) >= 3 * n then resize()
return x
```
* ğŸ—£ï¸ ìš”ì•½ : 
**ArrayDeQue**ëŠ” **Listì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„**í•œë‹¤. ì´ë•Œ resize() í˜¸ì¶œì— ë“œëŠ” ë¹„ìšœì„ ë¬´ì‹œí•˜ë©´, _**get(i)**_ì™€ _**set(i,x)**_ëŠ” _**O(1)**_ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§€ê³  _**add(i,x)**_ì™€ _**remove(i)**_ëŠ” _**O(min{i, n-i})**_ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§„ë‹¤.
####

    
### ğŸ“š Dual Array Deque
>ğŸ’¡**Dual Array Deque?** 
>
ë‘ ê°œì˜ Array Stackì„ ì‚¬ìš©í•˜ì—¬ Listì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê²ƒ.
> * Dual Array Dequeì˜ íŠ¹ì§•
	1. Array Dequeì™€ ë˜‘ê°™ì€ ì„±ëŠ˜ì„ ê°€ì§.
	2. ë‹¨ìˆœí•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ê²°í•©í•˜ì—¬ ë” ë³µì¡í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ìƒì„±í•˜ëŠ” ì‚¬ë¡€. 
	![](https://velog.velcdn.com/images/codudals98/post/8d6a534b-8764-4f6a-9b23-2bd17a54da4a/image.png)
```py
initialize()
	front <- ArrayStack()
    back <- ArrayStack()
```
```py
get(i)
	if i < front.size() then
# frontì˜ ì¸ë±ìŠ¤ëŠ” ê±°ê¾¸ë¡œ ë§¤ê²¨ì ¸ ìˆê¸° ë•Œë¬¸ì—, Index = front.size() - i - 1
		return front.get(front.size() - i - 1)
	else
# backì˜ ê²½ìš°ì—ëŠ” ì¸ë±ìŠ¤ê°€ ìˆœì°¨ì ì´ê¸° ë•Œë¬¸ì—, Index = i - front.size()
		return back.get(i - front.size())
```
```py
set(i,x)
	if i < front.size() then
# frontì˜ ì¸ë±ìŠ¤ëŠ” ê±°ê¾¸ë¡œ ë§¤ê²¨ì ¸ ìˆê¸° ë•Œë¬¸ì—, Index = front.size() - i - 1
		return front.set(front.size() - i - 1, x)
	else
# backì˜ ê²½ìš°ì—ëŠ” ì¸ë±ìŠ¤ê°€ ìˆœì°¨ì ì´ê¸° ë•Œë¬¸ì—, Index = i - front.size()
		return back.set(i - front.size(), x)
```
```py
add(i,x)
	if i < front.size() then
# frontì˜ ì¸ë±ìŠ¤ëŠ” ê±°ê¾¸ë¡œ ë§¤ê²¨ì ¸ ìˆê¸° ë•Œë¬¸ì—, Index = front.size() - i - 1
		return front.add(front.size() - i - 1, x)
	else
# backì˜ ê²½ìš°ì—ëŠ” ì¸ë±ìŠ¤ê°€ ìˆœì°¨ì ì´ê¸° ë•Œë¬¸ì—, Index = i - front.size()
		return back.add(i - front.size(), x)
balance() # front.size()ì™€ back.size() ê°€ í¬ê²Œ ì°¨ì´ë‚˜ì§€ ì•Šë„ë¡ ì¡°ì •.
# add(i,x)ì˜ ì‹œê°„ë³µì¡ë„ëŠ” balanceí•¨ìˆ˜ê°€ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠëƒì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆì§€ë§Œ,
# balanceì— ì˜í•´ frontì™€ backì˜ ì›ì†Œ ìˆ˜ê°€ ê±°ì˜ ë™ì¼í•˜ê²Œ ìœ ì§€ë˜ëŠ” ì´ìƒì ì¸ ê²½ìš°ë¥¼ ê°€ì •í•˜ë©´, 
# i < n - i ì¼ ë•Œ (i < front.size()ì¼ ë•Œ) O(i)ì´ê³ 
# i >= n - i ì¼ ë•Œ (i >= front.size()ì¼ ë•Œ) O(n - i)ì´ë¯€ë¡œ
# ì¢…í•©í•˜ë©´ O(min{i, n - i})
```
```py
remove(i)
	if i < front.size() then
# frontì˜ ì¸ë±ìŠ¤ëŠ” ê±°ê¾¸ë¡œ ë§¤ê²¨ì ¸ ìˆê¸° ë•Œë¬¸ì—, Index = front.size() - i - 1
		x <- front.remove(front.size() - i - 1)
	else
# backì˜ ê²½ìš°ì—ëŠ” ì¸ë±ìŠ¤ê°€ ìˆœì°¨ì ì´ê¸° ë•Œë¬¸ì—, Index = i - front.size()
		return back.remove(i - front.size())
balance() # front.size()ì™€ back.size() ê°€ í¬ê²Œ ì°¨ì´ë‚˜ì§€ ì•Šë„ë¡ ì¡°ì •.
```
```py
balance()
# size() : return front.size() + back.size()
n <- size()
mid <- n div 2 # nì„ 2ë¡œ ë‚˜ëˆˆ ë’¤ ì •ìˆ˜ë¡œ ë§Œë“  ê°’, DualArrayDequeì˜ ì¤‘ì•™ì— í•´ë‹¹í•˜ëŠ” ì¸ë±ìŠ¤
if 3 * front.size() < back.size() or 3 * back.size() < front.size() then
	f <- ArrayStack() # ìƒˆë¡œìš´ ArrayStackì„ frontë¡œ í• ë‹¹í•˜ê³  ì²˜ìŒë¶€í„° mid ì „ê¹Œì§€ì˜ ì›ì†Œë¥¼ frontì— ì €ì¥
	for i in 0,1,2,... mid - 1 do
    	f.add(i, get(mid - i - 1))
    b <- ArrayStack() # ìƒˆë¡œìš´ ArrayStackì„ backìœ¼ë¡œ í• ë‹¹í•˜ê³  midë¡œë¶€í„° mid ì˜¤ë¥¸ìª½ì˜ ì›ì†Œë“¤ì„ backì— ì €ì¥
    for i in 0,1,2,... n - mid - 1 do
    	b.add(i, get(mid + i))
    front <- f
	back <- b
```
* ğŸ—£ï¸ ìš”ì•½ : 
**DualArrayDeQue**ëŠ” **Listì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„**í•œë‹¤. ì´ë•Œ resize()ì™€ balance() í˜¸ì¶œì— ë“œëŠ” ë¹„ìšœì„ ë¬´ì‹œí•˜ë©´, _**get(i)**_ì™€ _**set(i,x)**_ëŠ” _**O(1)**_ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§€ê³  _**add(i,x)**_ì™€ _**remove(i)**_ëŠ” _**O(min{i, n - i})**_ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§„ë‹¤.
####
    
### ğŸ“š Rootish Array Stack
>ğŸ’¡**Rootish Array Stack ì´ë€?** 
>
Rootish Array Stackì€ ì•ì„œ ë‚˜ì˜¨ ë‹¨ì ì„ ë³´ì•ˆí•˜ì—¬ Listì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ê²ƒ.
> * ì•ì— ë“±ì¥í–ˆë˜ ë°°ì—´ ê¸°ë°˜ ë°ì´í„° êµ¬ì¡°ë“¤ì€ ê³µê°„ì˜ ë‚­ë¹„ê°€ ìˆìŒ.
	1. resize()ì˜ ë¹„ìš©ì´ í¬ê¸° ë•Œë¬¸ì— ìì£¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.
    2. resize() í˜¸ì¶œ í›„ ì ˆë°˜ ë˜ëŠ” 1/3ì˜ ê³µê°„ë§Œì´ ì‚¬ìš©ë¨.
> * Rootish Array Stackì€ ğ‘‚(ë£¨íŠ¸ğ‘›) ë§Œí¼ì˜ ê³µê°„ì´ ë¹„ì‚¬ìš© ë˜ëŠ” ìƒíƒœë¡œ ìœ ì§€ëœë‹¤ëŠ” ì¥ì ì´ ìˆìŒ. 
![](https://velog.velcdn.com/images/codudals98/post/5b0e5252-9d99-4a17-ac9a-19a5af5f584a/image.png)
```py
initialize()
	n <- 0
# blockë“¤ì„ ê°€ë¦¬í‚¬ ì£¼ì†Œë“¤ì„ ArrayStackìœ¼ë¡œ ìƒì„±
	blocks <- ArrayStack()
# BlockIndex êµ¬í•˜ëŠ” ê³µì‹
# Q) ì¸ë±ìŠ¤ iê°€ ì†í•œ blockì˜ ì¸ë±ìŠ¤ bì™€ blockë‚´ ì¸ë±ìŠ¤ jëŠ”?
# i2b(i)
	 return int_value((ceil(-3.0 + sqrt(9 + 8 * i))/2.0))
# j = i - ((b(b+1)) / 2)
```
```py
get(i)
	b <- i2b(i)
	j <- i - b * (b + 1) / 2
# ië²ˆì§¸ ì›ì†ŒëŠ” b blockì˜ jë²ˆì§¸ì˜ ì¡´ì¬
	return blocks.get[b][j]
```
```py
set(i,x)
	b <- i2b(i)
	j <- i - b * (b + 1) / 2
    y <- bloks.get(b)[j] # ê¸°ì¡´ ì›ì†Œë¥¼ yì— ì €ì¥í•´ ë†“ê³ 
	blocks.get[b][j] <- x # xë¥¼ b blockì˜ jë²ˆì§¸ì— ì €ì¥
	return  y
```
```py
add(i,x)
# n - i - 1 ê°œì˜ ì›ì†Œ ì´ë™ì´ ì¼ì–´ë‚˜ë¯€ë¡œ O(n - i)
	r <- blocks.size()
# ì´ ê³µê°„ì´ ì›ì†Œ ê°œìˆ˜ + 1 ë³´ë‹¤ ì‘ìœ¼ë©´ grow()
if r * (r + 1 ) / 2 < n + 1 then grow()
	n <- n + 1
# ë§ˆì§€ë§‰ ì›ì†Œë¶€í„° ië²ˆì§¸ ì›ì†Œê¹Œì§€ í•œì¹¸ì”© ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™
	for j in n - 1 , n - 2, n - 3 , ... , i + 1 do
    	set(j, get(j - 1))
	set(i,x)
```
```py
# grow()í•¨ìˆ˜
grow()
 	blocks.append(new_array(blocks.size() + 1))
```
```py
remove(i)
# n - i ê°œì˜ ì›ì†Œ ì´ë™ì´ ì¼ì–´ë‚˜ë¯€ë¡œ O(n - i)
	x <- get(i)
# ë§ˆì§€ë§‰ ì›ì†Œë¶€í„° i + 1ë²ˆì§¸ ì›ì†Œê¹Œì§€ í•œì¹¸ì”© ì™¼ìª½ìœ¼ë¡œ ì´ë™
for j in i, i + 1, i + 2, ... , n - 2 do
	set(j, get(j + 1))
n <- n - 1
r <- blocks.size()
# ë§ˆì§€ë§‰ ë‘ blockì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ blockë§Œìœ¼ë¡œ í˜„ì¬ ì›ì†Œë¥¼ ëª¨ë‘ ë‹´ì„ ìˆ˜ ì‡ë‹¤ë©´ shrink()
if (r - 2)*(r - 1) / 2 <= n then shrink()
return x
```
```py
# shrink()í•¨ìˆ˜
shrink()
	r <- blocks.size() 
# ë§ˆì§€ë§‰ ë‘ blockì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ blockë§Œìœ¼ë¡œ í˜„ì¬ ì›ì†Œë¥¼ ëª¨ë‘ ë‹´ì„ ìˆ˜ ì‡ëŠ” ì¡°ê±´ì´ ì„±ë¦½í•˜ëŠ” ë™ì•ˆ
# ê³„ì† ë§ˆì§€ë§‰ blockì„ ì‚­ì œ
	while r > 0 and (r - 2)*(r - 1) / 2 >= n do
	 	blocks.remove(blocks.size() - 1)
		r <- r - 1
# * ê³µê°„ ë³µì¡ë„
# shrink()ì˜ íŠ¹ì„±ìƒ í•­ìƒ ë§ˆì§€ë§‰ ë‘ blockì€ ì™„ì „íˆ ì±„ì–´ì§€ì§€ ì•Šì€ ìƒíƒœë¡œ ìœ ì§€ë¨.
# (r - 2)(r - 1) / 2 >= nì¸ ì¡°ê±´ì—ì„œëŠ” ê³„ì† ë§ˆì§€ë§‰ blockì„ ì‚­ì œí•˜ë¯€ë¡œ, ê²°êµ­ (r - 2)(r - 1) / 2 < n ê°€ ì„±ë¦½
# r < (3 + ë£¨íŠ¸(1 + 8n)) / 2 = O(ë£¨íŠ¸(n))
# ë§ˆì§€ë§‰ ë‘ blockì˜ ì‚¬ì´ì¦ˆëŠ” rê³¼ r - 1ì´ë¯€ë¡œ ë‘ ë¸”ë¡ì´ ì™„ì „íˆ ë¹„ì—ˆì„ ë•Œ ë‚­ë¹„ë˜ëŠ” ê³µê°„ì€ 2r - 1 = O(ë£¨íŠ¸(n))
```
* ğŸ—£ï¸ ìš”ì•½ : 
**RootishArrayStack**ëŠ” **Listì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„**í•œë‹¤. ì´ë•Œ grow()ì™€ shrink() í˜¸ì¶œì— ë“œëŠ” ë¹„ìšœì„ ë¬´ì‹œí•˜ë©´, _**get(i)**_ì™€ _**set(i,x)**_ëŠ” _**O(1)**_ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§€ê³  _**add(i,x)**_ì™€ _**remove(i)**_ëŠ” _**O(n - i)**_ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§„ë‹¤.
ì´ë•Œ RootishArrayStackì— ì˜í•´ ë‚­ë¹„ë˜ëŠ” ê³µê°„ì˜ ë³µì¡ë„ëŠ” O(ë£¨íŠ¸(n))ì´ë‹¤.
####

